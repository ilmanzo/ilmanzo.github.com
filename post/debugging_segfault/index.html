<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SEGFAULT: Debugging a crashing application | ilManzo's blog</title>
<meta name=keywords content="linux,sysadmin,opensuse,programming,debugging"><meta name=description content="What's a core dump and how to use it for debugging ?"><meta name=author content="Andrea Manzini"><link rel=canonical href=https://ilmanzo.github.io/post/debugging_segfault/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://ilmanzo.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ilmanzo.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ilmanzo.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ilmanzo.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ilmanzo.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ilmanzo.github.io/post/debugging_segfault/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6PN4FTRLNL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6PN4FTRLNL")}</script><meta property="og:url" content="https://ilmanzo.github.io/post/debugging_segfault/"><meta property="og:site_name" content="ilManzo's blog"><meta property="og:title" content="SEGFAULT: Debugging a crashing application"><meta property="og:description" content="What's a core dump and how to use it for debugging ?"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-04-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-05T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Sysadmin"><meta property="article:tag" content="Opensuse"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Debugging"><meta name=twitter:card content="summary"><meta name=twitter:title content="SEGFAULT: Debugging a crashing application"><meta name=twitter:description content="What's a core dump and how to use it for debugging ?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ilmanzo.github.io/post/"},{"@type":"ListItem","position":2,"name":"SEGFAULT: Debugging a crashing application","item":"https://ilmanzo.github.io/post/debugging_segfault/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SEGFAULT: Debugging a crashing application","name":"SEGFAULT: Debugging a crashing application","description":"What's a core dump and how to use it for debugging ?","keywords":["linux","sysadmin","opensuse","programming","debugging"],"articleBody":"üôÄ Something breaks If you use linux running some applications you could have seen sometimes a similar error message:\n[1] 24975 segmentation fault (core dumped) what‚Äôs meaning and how it can be useful ? Let‚Äôs dig it out.\nüß™ Lab Setup To make a proper case study, we need a crashing program. Of course they are very rare nowadays üòÅ so we just create a new one ourself, showing off our worst C coding bad skills and practices.\nWarning : this program is poorly written, just to show off how segmentation fault works, it‚Äôs not intended for any other purpose‚Ä¶ Dont‚Äô do that in a real context.\n// badprogram.c #include #include void makeitcrash() { char buffer[10000]; memset(buffer, 0, sizeof(buffer)); for(int i=1; i\u003c100000; i*=2) buffer[i]='A'; // typo: a zero in excess } int main() { printf(\"Kaboom!\"); makeitcrash(); return 0; } now we need to compile it, and we are also going to insert the debug symbols in the binary, so we‚Äôll use the -g flag:\n$ gcc -g badprogram.c -o badprogram ./badprogram [1] 7022 segmentation fault (core dumped) ./badprogram Good, it failed! But what really happened ? How and where it ‚Äòdumped‚Äô something ? üí©\nüêï A bit of investigation There are many resources out there that explain this stuff better than me, but long story short, when a program tries to access an invalid memory region (by any means, like dereferencing a NULL pointer for example), the operating system sends the signal 11 (SIGSEGV) error to the process. The default signal handler optionally creates a ‚Äòdump‚Äô file wich contains the memory of the process at the time of error and terminates it with an abrupt message.\nSince they can take lots of space, usually by default core dumps are compressed; we can check some information about the dumped core with coredumpctl util:\n$ coredumpctl info badprogram PID: 4269 (badprogram) UID: 1000 (andrea) GID: 1000 (andrea) Signal: 11 (SEGV) Timestamp: Fri 2024-04-05 11:13:45 CEST (6s ago) Command Line: ./badprogram Executable: /home/andrea/projects/coredumper/badprogram Unit: user@1000.service User Unit: vte-spawn-68d635ed-58e5-4522-95ee-2deb64da991a.scope Slice: user-1000.slice Owner UID: 1000 (andrea) Boot ID: [blablabla] Machine ID: [blablabla] Hostname: localhost Storage: /var/lib/systemd/coredump/core.badprogram.1000.9d49cca5818645e4baacc1ddddd7a9e8.4269.1712308425000000.zst (present) Size on Disk: 25.3K Message: Process 4269 (badprogram) of user 1000 dumped core. Stack trace of thread 4269: #0 0x0000000000401152 n/a (/home/andrea/projects/prove/coredumper/badprogram + 0x1152) #1 0x0000000000401175 n/a (/home/andrea/projects/prove/coredumper/badprogram + 0x1175) #2 0x00007f112f02a1f0 __libc_start_call_main (libc.so.6 + 0x2a1f0) #3 0x00007f112f02a2b9 __libc_start_main@@GLIBC_2.34 (libc.so.6 + 0x2a2b9) #4 0x0000000000401075 n/a (/home/andrea/projects/prove/coredumper/badprogram + 0x1075) ELF object binary architecture: AMD x86-64 side note: you can always get a dump from a running program by sending a SIGABRT signal to its process id, like:\n$ kill -ABRT $(pidof firefox-bin)\n‚õèÔ∏è Going deeper Let‚Äôs unpack that compressed file to an handy location and inspect it a bit :\n$ zstd --uncompress /var/lib/systemd/coredump/core.badprogram.1000.9d49cca5818645e4baacc1ddddd7a9e8.4269.1712308425000000.zst -o badprogram.core /var/lib/systemd/coredump/core.badprogram.1000.9d49cca5818645e4baacc1ddddd7a9e8.4269.1712308425000000.zst: 475136 bytes $ ls -l -rwxr-xr-x 1 andrea andrea 21152 apr 5 11:08 badprogram* -rw-r--r-- 1 andrea andrea 240 apr 5 09:30 badprogram.c -rw-r----- 1 andrea andrea 475136 apr 5 11:13 badprogram.core Now we run again the faulty program, only this time we do with the help of Gnu Debugger and passing also the coredump file:\n$ gdb ./badprogram -c badprogram.core Program terminated with signal SIGSEGV, Segmentation fault. #0 0x0000000000401188 in makeitcrash () at badprogram.c:7 7\tfor(int i=1; i\u003c100000; i*=2) buffer[i]='A'; (gdb) bt #0 0x0000000000401188 in makeitcrash () at badprogram.c:7 #1 0x00000000004011bd in main () at badprogram.c:12 (gdb) print i $1 = 32768 (gdb) $2 = 32768 (gdb) info locals i = 32768 buffer = \"\\000AA\\000A\\000\\000\\000A\\000\\000\\000\\000\\000\\000\\000A\", '\\000' ","wordCount":"841","inLanguage":"en","datePublished":"2024-04-05T00:00:00Z","dateModified":"2024-04-05T00:00:00Z","author":{"@type":"Person","name":"Andrea Manzini"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ilmanzo.github.io/post/debugging_segfault/"},"publisher":{"@type":"Organization","name":"ilManzo's blog","logo":{"@type":"ImageObject","url":"https://ilmanzo.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ilmanzo.github.io/ accesskey=h title="ilManzo's blog (Alt + H)">ilManzo's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ilmanzo.github.io/curriculum title=Curriculum><span>Curriculum</span></a></li><li><a href=https://ilmanzo.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://ilmanzo.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://ilmanzo.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ilmanzo.github.io/post/ title=Posts><span>Posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ilmanzo.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://ilmanzo.github.io/post/>Posts</a></div><h1 class="post-title entry-hint-parent">SEGFAULT: Debugging a crashing application</h1><div class=post-description>What's a core dump and how to use it for debugging ?</div><div class=post-meta><span title='2024-04-05 00:00:00 +0000 UTC'>April 5, 2024</span>&nbsp;¬∑&nbsp;Andrea Manzini</div></header><div class=post-content><h2 id=-something-breaks>üôÄ Something breaks<a hidden class=anchor aria-hidden=true href=#-something-breaks>#</a></h2><p>If you use linux running some applications you could have seen sometimes a similar error message:</p><h2 id=1----24975-segmentation-fault-core-dumped><code>[1] 24975 segmentation fault (core dumped)</code><a hidden class=anchor aria-hidden=true href=#1----24975-segmentation-fault-core-dumped>#</a></h2><p>what&rsquo;s meaning and how it can be useful ? Let&rsquo;s dig it out.</p><h2 id=-lab-setup>üß™ Lab Setup<a hidden class=anchor aria-hidden=true href=#-lab-setup>#</a></h2><p>To make a proper case study, we need a crashing program. Of course they are very rare nowadays &#x1f601; so we just create a new one ourself, showing off our worst C coding bad skills and practices.</p><p>Warning : this program is poorly written, just to show off how segmentation fault works, it&rsquo;s not intended for any other purpose&mldr; Dont&rsquo; do that in a real context.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>// badprogram.c 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;string.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>makeitcrash</span>() {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>char</span> buffer[<span style=color:#ae81ff>10000</span>];
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>memset</span>(buffer, <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>sizeof</span>(buffer));
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>; i<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>100000</span>; i<span style=color:#f92672>*=</span><span style=color:#ae81ff>2</span>) buffer[i]<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;A&#39;</span>; <span style=color:#75715e>// typo: a zero in excess
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;Kaboom!&#34;</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>makeitcrash</span>();
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>now we need to compile it, and we are also going to insert the debug symbols in the binary, so we&rsquo;ll use the <code>-g</code> flag:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ gcc -g badprogram.c -o badprogram
</span></span><span style=display:flex><span>./badprogram
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>    <span style=color:#ae81ff>7022</span> segmentation fault <span style=color:#f92672>(</span>core dumped<span style=color:#f92672>)</span>  ./badprogram
</span></span></code></pre></div><p>Good, it failed! But what really happened ? How and where it &lsquo;dumped&rsquo; something ? &#x1f4a9;</p><h2 id=-a-bit-of-investigation>üêï A bit of investigation<a hidden class=anchor aria-hidden=true href=#-a-bit-of-investigation>#</a></h2><p>There are <a href=https://jvns.ca/blog/2018/04/28/debugging-a-segfault-on-linux/>many resources out there</a> that explain this stuff better than me, but long story short, when a program tries to access an invalid memory region (by any means, like dereferencing a <code>NULL</code> pointer for example), the operating system sends the <em>signal 11 (SIGSEGV)</em> error to the process. The default signal handler optionally creates a &lsquo;dump&rsquo; file wich contains the memory of the process at the time of error and terminates it with an abrupt message.</p><p>Since they can take lots of space, usually by default core dumps are compressed; we can check some information about the dumped core with <code>coredumpctl</code> util:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ coredumpctl info badprogram
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>           PID: <span style=color:#ae81ff>4269</span> <span style=color:#f92672>(</span>badprogram<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>           UID: <span style=color:#ae81ff>1000</span> <span style=color:#f92672>(</span>andrea<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>           GID: <span style=color:#ae81ff>1000</span> <span style=color:#f92672>(</span>andrea<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        Signal: <span style=color:#ae81ff>11</span> <span style=color:#f92672>(</span>SEGV<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     Timestamp: Fri 2024-04-05 11:13:45 CEST <span style=color:#f92672>(</span>6s ago<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  Command Line: ./badprogram
</span></span><span style=display:flex><span>    Executable: /home/andrea/projects/coredumper/badprogram
</span></span><span style=display:flex><span>          Unit: user@1000.service
</span></span><span style=display:flex><span>     User Unit: vte-spawn-68d635ed-58e5-4522-95ee-2deb64da991a.scope
</span></span><span style=display:flex><span>         Slice: user-1000.slice
</span></span><span style=display:flex><span>     Owner UID: <span style=color:#ae81ff>1000</span> <span style=color:#f92672>(</span>andrea<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>       Boot ID: <span style=color:#f92672>[</span>blablabla<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    Machine ID: <span style=color:#f92672>[</span>blablabla<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>      Hostname: localhost
</span></span><span style=display:flex><span>       Storage: /var/lib/systemd/coredump/core.badprogram.1000.9d49cca5818645e4baacc1ddddd7a9e8.4269.1712308425000000.zst <span style=color:#f92672>(</span>present<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  Size on Disk: 25.3K
</span></span><span style=display:flex><span>       Message: Process <span style=color:#ae81ff>4269</span> <span style=color:#f92672>(</span>badprogram<span style=color:#f92672>)</span> of user <span style=color:#ae81ff>1000</span> dumped core.
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>                Stack trace of thread 4269:
</span></span><span style=display:flex><span>                <span style=color:#75715e>#0  0x0000000000401152 n/a (/home/andrea/projects/prove/coredumper/badprogram + 0x1152)</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>#1  0x0000000000401175 n/a (/home/andrea/projects/prove/coredumper/badprogram + 0x1175)</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>#2  0x00007f112f02a1f0 __libc_start_call_main (libc.so.6 + 0x2a1f0)</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>#3  0x00007f112f02a2b9 __libc_start_main@@GLIBC_2.34 (libc.so.6 + 0x2a2b9)</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>#4  0x0000000000401075 n/a (/home/andrea/projects/prove/coredumper/badprogram + 0x1075)</span>
</span></span><span style=display:flex><span>                ELF object binary architecture: AMD x86-64
</span></span></code></pre></div><p>side note: you can always get a dump from a running program by sending a <code>SIGABRT</code> signal to its process id, like:</p><p><code>$ kill -ABRT $(pidof firefox-bin)</code></p><h2 id=-going-deeper>‚õèÔ∏è Going deeper<a hidden class=anchor aria-hidden=true href=#-going-deeper>#</a></h2><p>Let&rsquo;s unpack that compressed file to an handy location and inspect it a bit :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ zstd --uncompress /var/lib/systemd/coredump/core.badprogram.1000.9d49cca5818645e4baacc1ddddd7a9e8.4269.1712308425000000.zst -o badprogram.core
</span></span><span style=display:flex><span>/var/lib/systemd/coredump/core.badprogram.1000.9d49cca5818645e4baacc1ddddd7a9e8.4269.1712308425000000.zst: <span style=color:#ae81ff>475136</span> bytes 
</span></span><span style=display:flex><span>$ ls -l
</span></span><span style=display:flex><span>-rwxr-xr-x <span style=color:#ae81ff>1</span> andrea andrea  <span style=color:#ae81ff>21152</span> apr  <span style=color:#ae81ff>5</span> 11:08 badprogram*
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> andrea andrea    <span style=color:#ae81ff>240</span> apr  <span style=color:#ae81ff>5</span> 09:30 badprogram.c
</span></span><span style=display:flex><span>-rw-r----- <span style=color:#ae81ff>1</span> andrea andrea <span style=color:#ae81ff>475136</span> apr  <span style=color:#ae81ff>5</span> 11:13 badprogram.core
</span></span></code></pre></div><p>Now we run again the faulty program, only this time we do with the help of Gnu Debugger and passing also the coredump file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ gdb ./badprogram -c badprogram.core 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Program terminated with signal SIGSEGV, Segmentation fault.
</span></span><span style=display:flex><span><span style=color:#75715e>#0  0x0000000000401188 in makeitcrash () at badprogram.c:7</span>
</span></span><span style=display:flex><span>7	   <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>int i<span style=color:#f92672>=</span>1; i&lt;100000; i*<span style=color:#f92672>=</span>2<span style=color:#f92672>)</span> buffer<span style=color:#f92672>[</span>i<span style=color:#f92672>]=</span><span style=color:#e6db74>&#39;A&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> bt
</span></span><span style=display:flex><span><span style=color:#75715e>#0  0x0000000000401188 in makeitcrash () at badprogram.c:7</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#1  0x00000000004011bd in main () at badprogram.c:12</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> print i
</span></span><span style=display:flex><span>$1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>32768</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span>$2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>32768</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info locals
</span></span><span style=display:flex><span>i <span style=color:#f92672>=</span> <span style=color:#ae81ff>32768</span>
</span></span><span style=display:flex><span>buffer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;\000AA\000A\000\000\000A\000\000\000\000\000\000\000A&#34;</span>, <span style=color:#e6db74>&#39;\000&#39;</span> &lt;repeats <span style=color:#ae81ff>15</span> times&gt;, <span style=color:#e6db74>&#34;A&#34;</span>, <span style=color:#e6db74>&#39;\000&#39;</span> &lt;repeats <span style=color:#ae81ff>31</span> times&gt;, <span style=color:#e6db74>&#34;A&#34;</span>, <span style=color:#e6db74>&#39;\000&#39;</span> &lt;repeats <span style=color:#ae81ff>63</span> times&gt;, <span style=color:#e6db74>&#34;A&#34;</span>, <span style=color:#e6db74>&#39;\000&#39;</span> &lt;repeats <span style=color:#ae81ff>127</span> times&gt;...
</span></span></code></pre></div><p>thanks to the debug info included during the compilation, we are able to see the source of the offending code, and the variable value when the problem happened, giving us a starting point to remediate our mistake.</p><p>So at the end, what&rsquo;s the difference between having a coredump file or not ? Why can&rsquo;t we just re-run the same program and let it crash under GDB ?</p><p><code>The point is to have in our hands the exact memory snapshot of the program at the time when it crashed.</code></p><p>Maybe it&rsquo;s not feasible to run it now, or we don&rsquo;t have the same environment or cannot recreate the same conditions in our pc. But thanks to <strong>core dumps</strong> we are able to time-travel to that past.</p><h4 id=extra-tip--run-gdb-with-the--tui-option-or-type-tui-enable-at-the-prompt-to-get-a-nice-user-friendly-interface-smile>Extra tip : run gdb with the <code>-tui</code> option or type <code>tui enable</code> at the prompt to get a nice &lsquo;user-friendly&rsquo; <a href=https://dev.to/irby/making-gdb-easier-the-tui-interface-15l2>interface</a> &#x1f604;<a hidden class=anchor aria-hidden=true href=#extra-tip--run-gdb-with-the--tui-option-or-type-tui-enable-at-the-prompt-to-get-a-nice-user-friendly-interface-smile>#</a></h4><h2 id=-closing-toughts>üö™ Closing toughts<a hidden class=anchor aria-hidden=true href=#-closing-toughts>#</a></h2><p>Of course it won&rsquo;t be always so easy, but being able to inspect the memory process of a dead program is an invaluable debugging tool. One important observation is that often the packages we install don&rsquo;t have debug information attached, so we need to install them separately or build the source code by ourself. Even the kernel itself can be analyzed, by using <a href="https://www.suse.com/support/kb/doc/?id=000016171">kernel crash core dumps</a>. On Linux, even errors and crashes are nice and useful!</p><p>As a follow up on GDB debugging, I recommend to read this excellent <a href=https://www.brendangregg.com/blog/2016-08-09/gdb-example-ncurses.html>blog post</a> by Brendan Gregg.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ilmanzo.github.io/tags/linux/>Linux</a></li><li><a href=https://ilmanzo.github.io/tags/sysadmin/>Sysadmin</a></li><li><a href=https://ilmanzo.github.io/tags/opensuse/>Opensuse</a></li><li><a href=https://ilmanzo.github.io/tags/programming/>Programming</a></li><li><a href=https://ilmanzo.github.io/tags/debugging/>Debugging</a></li></ul><nav class=paginav><a class=prev href=https://ilmanzo.github.io/post/first_steps_with_golang_tui/><span class=title>¬´ Prev</span><br><span>A different approach to terminal user interfaces</span>
</a><a class=next href=https://ilmanzo.github.io/post/wrapping_up_osday_2024/><span class=title>Next ¬ª</span><br><span>Osday 2024 recap</span></a></nav></footer></article></main><footer class=footer><span>¬© 2012-2024 Andrea Manzini</span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>