<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>il linguaggio Lua: parte 12 | ilManzo's blog</title><meta name=keywords content="lua,programming,tutorial,linux,italian"><meta name=description content="introduzione al linguaggio Lua"><meta name=author content="Andrea Manzini"><link rel=canonical href=https://ilmanzo.github.io/post/il-linguaggio-lua-12/><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://ilmanzo.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ilmanzo.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ilmanzo.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ilmanzo.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ilmanzo.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ilmanzo.github.io/post/il-linguaggio-lua-12/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6PN4FTRLNL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6PN4FTRLNL")}</script><meta property="og:url" content="https://ilmanzo.github.io/post/il-linguaggio-lua-12/"><meta property="og:site_name" content="ilManzo's blog"><meta property="og:title" content="il linguaggio Lua: parte 12"><meta property="og:description" content="introduzione al linguaggio Lua"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-10-24T00:00:00+00:00"><meta property="article:modified_time" content="2018-10-24T00:00:00+00:00"><meta property="article:tag" content="Lua"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Tutorial"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Italian"><meta name=twitter:card content="summary"><meta name=twitter:title content="il linguaggio Lua: parte 12"><meta name=twitter:description content="introduzione al linguaggio Lua"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ilmanzo.github.io/post/"},{"@type":"ListItem","position":2,"name":"il linguaggio Lua: parte 12","item":"https://ilmanzo.github.io/post/il-linguaggio-lua-12/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"il linguaggio Lua: parte 12","name":"il linguaggio Lua: parte 12","description":"introduzione al linguaggio Lua","keywords":["lua","programming","tutorial","linux","italian"],"articleBody":"segue dalla parte 11\nsegnalazioni lunari Tra le rocks più interessanti citiamo quelle che permettono le operazioni di networking, come luasocket; salendo di livello, spicca il Kepler project, che comprende un intero stack per applicazioni web: Lapis micro framework, il framework MVC Sailor, e TurboLua, un tool per costuire velocissimi microservizi REST .\nConcludiamo la panoramica sulle librerie accennando ai moduli per creare interfacce grafiche; al pari degli altri linguaggi di scripting, Lua offre binding per i maggiori toolkit grafici: curses, GTK, QT, fltk, wx si usano come negli altri linguaggi e sarebbe qui tedioso illustrarne le modalità. Ci focalizzeremo invece su due progetti peculiari, rispettivamente Lua Visual Controls (VCLua) e LÖVE , che hanno l’ulteriore pregio di essere leggeri e snelli. Scarichiamo e installiamo VCLua:\n$ wget http://luaforge.net/frs/download.php/4705/vclua-0.3.5-linux-gtk2.zip scompattiamo e copiamo la shared library nella directory corrente:\n$ unzip vclua*.zip \u0026\u0026 cp vclua*/bin/vcl.so . Di seguito una piccola dimostrazione dell’uso di questa libreria.\n-- guibutton.lua require \"vcl\" mainForm = VCL.Form(\"mainForm\") mainForm.Caption = \"VCLua application\" mainForm.onclosequery = \"onCloseHandler\" function onCloseHandler(Sender) return true -- the form can be closed end button = VCL.Button(mainForm) button.onclick = \"onButtonClick\" button.Caption=\"Close\" function onButtonClick(sender) print \"bottone premuto\" mainForm:Close() end mainForm:ShowModal() mainForm:Free() LÖVE, che ha come motto “Don’t forget to have fun” non è solo una libreria grafica, ma un completo framework: il programmatore ha il compito di scrivere poche funzioni che vengono richiamate periodicamente dal motore runtime. Vediamo il meccanismo con un esempio pratico. Anzitutto scarichiamo e installiamo il software con un\n$ sudo apt-get install love oppure visitando il sito http://love2d.org/ ; verifichiamo il funzionamento con un\n$ love --version ora creiamo una nuova directory\n$ mkdir hello ; cd hello e dentro questa prepariamo un file di nome main.lua con il seguente contenuto:\nfunction love.load() love.graphics.setFont(love.graphics.newFont(70)) love.graphics.setBackgroundColor(255,255,150) love.graphics.setColor(0,0,160) end function love.draw() love.graphics.print(\"Hello World\", 200, 300) end abbiamo finito; possiamo vedere il risultato lanciando\n$ love hello o, per i pigri, in figura:\nLÖVE si basa sul concetto di callback: il framework cerca determinate funzioni dentro il nostro script e le esegue quando ne ha necessità; ad esempio love.load() viene invocata alla partenza, e verosimilmente conterrà il codice per caricare le immagini, i suoni e come abbiamo fatto noi impostare i colori. Altre funzioni come love.update() e love.draw() vengono eseguite ripetutamente (anche più volte al secondo) e si occuperanno rispettivamente di aggiornare lo stato degli oggetti e di disegnarli a video. Essendo un ambiente pensato per sviluppare videogiochi, abbiamo a disposizione una vasta serie di routine anche per il suono, lo scrolling, la lettura dell’input (tastiera, mouse, joystick) e nelle ultime versioni anche love.physics, un potente motore fisico basato sul celebre engine Box2D (utilizzato da moltissimi giochi tra cui il celebre Angry Birds) per simulare in maniera realistica il movimento e l’interazione tra corpi rigidi. Non essendo possibile soffermarci troppo su questi aspetti, invito gli interessati a visitare il sito di riferimento già citato.\nPrima di concludere segnalo il wiki ufficiale della comunità Lua: http://lua-users.org/wiki Una curiosità su questo sito: i costi di gestione e mantenimento sono sostenuti grazie ad una lotteria che si tiene periodicamente tra tutti gli aderenti : http://lua-users.org/wiki/LuaUsersLottery . Parteciparvi può essere un modo semplice ed efficace per sostenere un validissimo progetto opensource.\n","wordCount":"532","inLanguage":"en","datePublished":"2018-10-24T00:00:00Z","dateModified":"2018-10-24T00:00:00Z","author":{"@type":"Person","name":"Andrea Manzini"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ilmanzo.github.io/post/il-linguaggio-lua-12/"},"publisher":{"@type":"Organization","name":"ilManzo's blog","logo":{"@type":"ImageObject","url":"https://ilmanzo.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ilmanzo.github.io/ accesskey=h title="ilManzo's blog (Alt + H)">ilManzo's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ilmanzo.github.io/curriculum title=Curriculum><span>Curriculum</span></a></li><li><a href=https://ilmanzo.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://ilmanzo.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://ilmanzo.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ilmanzo.github.io/post/ title=Posts><span>Posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ilmanzo.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ilmanzo.github.io/post/>Posts</a></div><h1 class="post-title entry-hint-parent">il linguaggio Lua: parte 12</h1><div class=post-description>introduzione al linguaggio Lua</div><div class=post-meta><span title='2018-10-24 00:00:00 +0000 UTC'>October 24, 2018</span>&nbsp;·&nbsp;Andrea Manzini</div></header><div class=post-content><p>segue dalla <a href=https://ilmanzo.github.io/post/il-linguaggio-lua-11/>parte 11</a></p><h1 id=segnalazioni-lunari>segnalazioni lunari<a hidden class=anchor aria-hidden=true href=#segnalazioni-lunari>#</a></h1><p>Tra le <em>rocks</em> più interessanti citiamo quelle che permettono le operazioni di networking, come <strong>luasocket</strong>; salendo di livello, spicca il <a href=https://github.com/keplerproject><strong>Kepler project</strong></a>, che comprende un intero stack per applicazioni web: <a href=http://leafo.net/lapis/><strong>Lapis micro framework</strong></a>, il framework MVC <a href=http://sailorproject.org/><strong>Sailor</strong></a>, e <a href=https://turbo.readthedocs.io/en/latest/><strong>TurboLua</strong></a>, un tool per costuire velocissimi microservizi REST .</p><p>Concludiamo la panoramica sulle librerie accennando ai moduli per creare interfacce grafiche; al pari degli altri linguaggi di scripting, Lua offre binding per i maggiori toolkit grafici: curses, GTK, QT, fltk, wx si usano come negli altri linguaggi e sarebbe qui tedioso illustrarne le modalità. Ci focalizzeremo invece su due progetti peculiari, rispettivamente Lua Visual Controls (VCLua) e LÖVE , che hanno l&rsquo;ulteriore pregio di essere leggeri e snelli.
Scarichiamo e installiamo VCLua:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ wget http://luaforge.net/frs/download.php/4705/vclua-0.3.5-linux-gtk2.zip</span></span></code></pre></div><p>scompattiamo e copiamo la shared library nella directory corrente:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ unzip vclua*.zip <span style=color:#f92672>&amp;&amp;</span> cp vclua*/bin/vcl.so .</span></span></code></pre></div><p>Di seguito una piccola dimostrazione dell’uso di questa libreria.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- guibutton.lua</span>
</span></span><span style=display:flex><span>require <span style=color:#e6db74>&#34;vcl&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mainForm <span style=color:#f92672>=</span> VCL.Form(<span style=color:#e6db74>&#34;mainForm&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mainForm.Caption <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;VCLua application&#34;</span>
</span></span><span style=display:flex><span>mainForm.onclosequery <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;onCloseHandler&#34;</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onCloseHandler</span>(Sender)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>-- the form can be closed</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>button <span style=color:#f92672>=</span> VCL.Button(mainForm)
</span></span><span style=display:flex><span>button.onclick <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;onButtonClick&#34;</span>
</span></span><span style=display:flex><span>button.Caption<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Close&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onButtonClick</span>(sender)
</span></span><span style=display:flex><span>  print <span style=color:#e6db74>&#34;bottone premuto&#34;</span>
</span></span><span style=display:flex><span>  mainForm:Close()
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mainForm:ShowModal()
</span></span><span style=display:flex><span>mainForm:Free()</span></span></code></pre></div><p>LÖVE, che ha come motto “Don’t forget to have fun” non è solo una libreria grafica, ma un completo framework: il programmatore ha il compito di scrivere poche funzioni che vengono richiamate periodicamente dal motore runtime. Vediamo il meccanismo con un esempio pratico. Anzitutto scarichiamo e installiamo il software con un</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo apt-get install love</span></span></code></pre></div><p>oppure visitando il sito <a href=http://love2d.org/>http://love2d.org/</a> ; verifichiamo il funzionamento con un</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ love --version </span></span></code></pre></div><p>ora creiamo una nuova directory</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ mkdir hello ; cd hello</span></span></code></pre></div><p>e dentro questa prepariamo un file di nome main.lua con il seguente contenuto:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>load</span>()
</span></span><span style=display:flex><span>  love.graphics.setFont(love.graphics.newFont(<span style=color:#ae81ff>70</span>))
</span></span><span style=display:flex><span>  love.graphics.setBackgroundColor(<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>150</span>)
</span></span><span style=display:flex><span>  love.graphics.setColor(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>160</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>love</span>.<span style=color:#a6e22e>draw</span>()
</span></span><span style=display:flex><span>  love.graphics.print(<span style=color:#e6db74>&#34;Hello World&#34;</span>, <span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>300</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span></span></span></code></pre></div><p>abbiamo finito; possiamo vedere il risultato lanciando</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ love hello</span></span></code></pre></div><p>o, per i pigri, in figura:</p><p><img alt=figura_love_hello loading=lazy src=/img/love_hello.png title="hello world with LOVE framework"></p><p>LÖVE si basa sul concetto di <strong>callback</strong>: il framework cerca determinate funzioni dentro il nostro script e le esegue quando ne ha necessità; ad esempio <em>love.load()</em> viene invocata alla partenza, e verosimilmente conterrà il codice per caricare le immagini, i suoni e come abbiamo fatto noi impostare i colori. Altre funzioni come <em>love.update()</em> e <em>love.draw()</em> vengono eseguite ripetutamente (anche più volte al secondo) e si occuperanno rispettivamente di aggiornare lo stato degli oggetti e di disegnarli a video. Essendo un ambiente pensato per sviluppare videogiochi, abbiamo a disposizione una vasta serie di routine anche per il suono, lo scrolling, la lettura dell&rsquo;input (tastiera, mouse, joystick) e nelle ultime versioni anche <em>love.physics</em>, un potente motore fisico basato sul celebre engine <strong>Box2D</strong> (utilizzato da moltissimi giochi tra cui il celebre Angry Birds) per simulare in maniera realistica il movimento e l&rsquo;interazione tra corpi rigidi. Non essendo possibile soffermarci troppo su questi aspetti, invito gli interessati a visitare il sito di riferimento già citato.</p><p>Prima di concludere segnalo il wiki ufficiale della comunità Lua: <a href=http://lua-users.org/wiki>http://lua-users.org/wiki</a>
Una curiosità su questo sito: i costi di gestione e mantenimento sono sostenuti grazie ad una lotteria che si tiene periodicamente tra tutti gli aderenti : <a href=http://lua-users.org/wiki/LuaUsersLottery>http://lua-users.org/wiki/LuaUsersLottery</a> . Parteciparvi può essere un modo semplice ed efficace per sostenere un validissimo progetto opensource.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ilmanzo.github.io/tags/lua/>Lua</a></li><li><a href=https://ilmanzo.github.io/tags/programming/>Programming</a></li><li><a href=https://ilmanzo.github.io/tags/tutorial/>Tutorial</a></li><li><a href=https://ilmanzo.github.io/tags/linux/>Linux</a></li><li><a href=https://ilmanzo.github.io/tags/italian/>Italian</a></li></ul><nav class=paginav><a class=prev href=https://ilmanzo.github.io/post/il-linguaggio-lua-13/><span class=title>« Prev</span><br><span>il linguaggio Lua: parte 13</span>
</a><a class=next href=https://ilmanzo.github.io/post/il-linguaggio-lua-11/><span class=title>Next »</span><br><span>il linguaggio Lua: parte 11</span></a></nav></footer></article></main><footer class=footer><span>© 2012-2025 Andrea Manzini</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>