<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>get notifications about openQA job status | ilManzo's blog</title>
<meta name=keywords content="linux,bash,programming,testing,automation"><meta name=description content="how to receive notification about your openQA job status update"><meta name=author content="Andrea Manzini"><link rel=canonical href=https://ilmanzo.github.io/post/openqa-jobs-notifier/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://ilmanzo.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ilmanzo.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ilmanzo.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ilmanzo.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ilmanzo.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6PN4FTRLNL"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6PN4FTRLNL",{anonymize_ip:!1})}</script><meta property="og:title" content="get notifications about openQA job status"><meta property="og:description" content="how to receive notification about your openQA job status update"><meta property="og:type" content="article"><meta property="og:url" content="https://ilmanzo.github.io/post/openqa-jobs-notifier/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-10-05T00:00:00+00:00"><meta property="article:modified_time" content="2022-10-05T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="get notifications about openQA job status"><meta name=twitter:description content="how to receive notification about your openQA job status update"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ilmanzo.github.io/post/"},{"@type":"ListItem","position":2,"name":"get notifications about openQA job status","item":"https://ilmanzo.github.io/post/openqa-jobs-notifier/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"get notifications about openQA job status","name":"get notifications about openQA job status","description":"how to receive notification about your openQA job status update","keywords":["linux","bash","programming","testing","automation"],"articleBody":"I got bored of ‘waiting’ for an OpenQA openSUSE job to complete, so I wrote this quick and dirty script…\nFor the same purpose there’s also the excellent and full-fledged openqa-mon, but I took the chance to learn something by implementing a simpler version myself.\n#!/bin/sh JOB=$1 if [ -z \"$JOB\" ]; then echo \"please provide job number as parameter\" exit fi MESSAGE='Your job is ready!' JOBURL=https://openqa.opensuse.org/tests/$JOB while : do STATE=$(openqa-cli api -o3 jobs/$JOB | jq .job.state) if [ $STATE != \\\"scheduled\\\" ]; then notify-send $MESSAGE $JOBURL echo $MESSAGE $JOBURL exit fi sleep 5 done To use it, simply run the script with the job number as first and only parameter, and you’ll get both a console and desktop notification when the status changes, so you can easily start to follow it with the browser, debug, download assets and so on.\nAs requirement, you’ll need to have some packages installed:\nopenqa-cli installed and configured (package: openQA-client in openSUSE) packages: jq, notify-send (packages: jq and libnotify-tools in openSUSE) Have fun!\n","wordCount":"169","inLanguage":"en","datePublished":"2022-10-05T00:00:00Z","dateModified":"2022-10-05T00:00:00Z","author":{"@type":"Person","name":"Andrea Manzini"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ilmanzo.github.io/post/openqa-jobs-notifier/"},"publisher":{"@type":"Organization","name":"ilManzo's blog","logo":{"@type":"ImageObject","url":"https://ilmanzo.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ilmanzo.github.io/ accesskey=h title="ilManzo's blog (Alt + H)">ilManzo's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ilmanzo.github.io/curriculum title=Curriculum><span>Curriculum</span></a></li><li><a href=https://ilmanzo.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://ilmanzo.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ilmanzo.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://ilmanzo.github.io/post/ title=Posts><span>Posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ilmanzo.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ilmanzo.github.io/post/>Posts</a></div><h1 class="post-title entry-hint-parent">get notifications about openQA job status</h1><div class=post-description>how to receive notification about your openQA job status update</div><div class=post-meta><span title='2022-10-05 00:00:00 +0000 UTC'>October 5, 2022</span>&nbsp;·&nbsp;Andrea Manzini</div></header><div class=post-content><p>I got bored of <em>&lsquo;waiting&rsquo;</em> for an <a href=http://open.qa/>OpenQA</a> <a href=https://openqa.opensuse.org/>openSUSE</a> job to complete, so I wrote this quick and dirty script&mldr;</p><p>For the same purpose there&rsquo;s also the excellent and full-fledged <a href=https://openqa-bites.github.io/posts/2021-02-25-openqa-mon/>openqa-mon</a>, but I took the chance to learn something by implementing a simpler version myself.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>JOB<span style=color:#f92672>=</span>$1
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$JOB<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;please provide job number as parameter&#34;</span>
</span></span><span style=display:flex><span>  exit 
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MESSAGE<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Your job is ready!&#39;</span>
</span></span><span style=display:flex><span>JOBURL<span style=color:#f92672>=</span>https://openqa.opensuse.org/tests/$JOB
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> :
</span></span><span style=display:flex><span><span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  STATE<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>openqa-cli api -o3 jobs/$JOB | jq .job.state<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $STATE !<span style=color:#f92672>=</span> <span style=color:#ae81ff>\&#34;</span>scheduled<span style=color:#ae81ff>\&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    notify-send $MESSAGE $JOBURL
</span></span><span style=display:flex><span>    echo $MESSAGE $JOBURL
</span></span><span style=display:flex><span>    exit
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>  sleep <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><p>To use it, simply run the script with the job number as first and only parameter, and you&rsquo;ll get both a console and desktop notification when the status changes, so you can easily start to follow it with the browser, debug, download assets and so on.</p><p>As requirement, you&rsquo;ll need to have some packages installed:</p><ul><li><code>openqa-cli</code> installed and configured (package: <code>openQA-client</code> in openSUSE)</li><li>packages: <code>jq</code>, <code>notify-send</code> (packages: <code>jq</code> and <code>libnotify-tools</code> in openSUSE)</li></ul><p>Have fun!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ilmanzo.github.io/tags/linux/>linux</a></li><li><a href=https://ilmanzo.github.io/tags/bash/>bash</a></li><li><a href=https://ilmanzo.github.io/tags/programming/>programming</a></li><li><a href=https://ilmanzo.github.io/tags/testing/>testing</a></li><li><a href=https://ilmanzo.github.io/tags/automation/>automation</a></li></ul><nav class=paginav><a class=prev href=https://ilmanzo.github.io/post/check-last-update-on-packages/><span class=title>« Prev</span><br><span>get update info about packages</span>
</a><a class=next href=https://ilmanzo.github.io/post/nim-frontend-web-development-with-karax/><span class=title>Next »</span><br><span>web components with Nim and Karax</span></a></nav></footer></article></main><footer class=footer><span>© 2012-2023 Andrea Manzini</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>