<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>automate OTP credentials for multi-factor authentication | ilManzo's blog</title><meta name=keywords content="bash,linux,hacking,otp"><meta name=description content="automate generation of OTP for multi-factor authentication"><meta name=author content="Andrea Manzini"><link rel=canonical href=https://ilmanzo.github.io/post/otp-generation-from-command-line/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ilmanzo.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ilmanzo.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ilmanzo.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ilmanzo.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ilmanzo.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6PN4FTRLNL"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6PN4FTRLNL",{anonymize_ip:!1})}</script><meta property="og:title" content="automate OTP credentials for multi-factor authentication"><meta property="og:description" content="automate generation of OTP for multi-factor authentication"><meta property="og:type" content="article"><meta property="og:url" content="https://ilmanzo.github.io/post/otp-generation-from-command-line/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-06-14T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-14T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="automate OTP credentials for multi-factor authentication"><meta name=twitter:description content="automate generation of OTP for multi-factor authentication"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ilmanzo.github.io/post/"},{"@type":"ListItem","position":2,"name":"automate OTP credentials for multi-factor authentication","item":"https://ilmanzo.github.io/post/otp-generation-from-command-line/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"automate OTP credentials for multi-factor authentication","name":"automate OTP credentials for multi-factor authentication","description":"automate generation of OTP for multi-factor authentication","keywords":["bash","linux","hacking","otp"],"articleBody":"Background: I work with one or more terminal command-line always opened and having to pick up my phone to generate an OTP breaks my flow; also it’s always nice to have an alternate source of multi-factor authentication if something bad happens, one day you could lose or break your trusty mobile device.\nTherefore I was looking for a way to login through Okta portals without a phone. You may argument that this defeats the whole meaning of MFA, but let’s say it’s only an hack for research and fun purpose …\nDISCLAIMER: This setup should be used only on ANOTHER trusted device, so use it at your own risk, and be sure to always properly protect your credentials: security is a very serious topic.\nTLDR: With this setup, every time you write :okta in any text entry field, it will be replaced with a properly generated OTP!\nRequirements: Install pass-otp.\nfor openSUSE Tumbleweed users like me, it’s just a matter of\n# zypper install pass-otp Steps: If you already have multifactor authentication set up, start with step 1.\nOtherwise, login up to the point where it asks you to “Set up (two-|multi)factor authentication”, and go to step 4.\nLogin to your organisation’s Okta settings. The url is typically of the form https://OKTA_HOME_PAGE/enduser/settings. For example,\nThe University of Sydney: https://sso.sydney.edu.au/enduser/settings Garvan: https://garvan.okta.com/enduser/settings Linkedin: https://linkedin.okta.com/enduser/settings Docusign: https://docusign.okta.com/enduser/settings Groupon: https://groupon.okta.com//enduser/settings Scroll to “Extra Verification”. This is typically at the bottom on the right.\nIf you already have Okta Verify or Google Authenticator set up with your organisation, remove it.\nNow you need to retrieve the secret one-time password (OTP) key.\nClick “Set up” next to “Okta Verify”.\nIf a button appears, click it. It may say “Configure factor” or “Set up”.\nClick “iPhone” or “Android”. It doesn’t matter which one you pick, you won’t be needing a phone.\nClick “Next”.\nClick “Can’t scan?”.\nClick the first dropdown menu and select “Setup manually without push notification”.\nCopy the secret key to your clipboard.\nCreate the OTP generator by running the following command, replacing OTP_NAME with a name of your choosing. Paste the secret key when prompted.\n$ pass otp insert -esi byebyeokta OTP_NAME Generate the OTP by running the following command. $ pass otp OTP_NAME Copy the output. Alternatively, use the -c option to copy it directly.\n$ pass otp -c OTP_NAME Enter the OTP.\nClick “Next”.\nPaste the number in the “Enter Code” text box.\nClick “Verify” to finish the setup.\nYou may have to click “Finish” as well.\nNow, whenever you are required to enter the OTP code in the future, simply generate it by following step 6.\nAuthenticator App Add the secret key to a OTP authenticator app. This is useful if you need to use a different computer and don’t have access to one which you set up pass-otp with.\nFind a way to add a new account by entering the secret key manually into the app. For the Okta Verify app, do the following. The steps are similar for the Google Authenticator app.\nPress the “+” button in the top-right corner.\nPress “Other”.\nPress “Enter Key Manually”.\nType an Account Name of your choosing.\nType in the secret key. If you have lost the key, run the following command to retrieve it.\n$ pass OTP_NAME | awk -F '[=\u0026]' '{print $2}' Press “Done”. Confirm you get the same codes on your phone as when following step 6. If not, you may have misspelled the secret key, in which case try again.\nIf you have an old account on a OTP authenticator app which you removed in step 3 you can remove it from the app.\nAutomating The goal is to auto fill and submit once prompted to enter the OTP code.\nThe original author used qutebrowser, binding a key chain to a submit_otp_qute.sh userscript; so you can follow that\nFor other purposes, and many reasons, personally I’m already using a tool like Espanso, but also AutoKey and any other “text-expander” that is able run external commands can meet the requirements.\nYou can use an Espanso configuration snippet like this:\n- trigger: \":okta\" replace: \"{{output}}\" vars: - name: output type: shell params: cmd: /usr/local/bin/submit_otp.sh OTP_NAME be sure to replace OTP_NAME with the one you chose before.\nThe script executed is quite easy, simply retrieve the code and echoes to stdout:\n#!/bin/sh # user script that enters the otp code # designed to be used when prompted with the Okta Verify \"Enter Code\" form if [ \"$#\" -ne 1 ]; then echo \"usage: $0 OTP_NAME\" exit 1 fi OTP_NAME=\"$1\" # retrieve the otp otp=$(pass otp \"$OTP_NAME\") if [ -z \"$otp\" ]; then echo \"Unknown OTP_NAME '$OTP_NAME'\" exit 1 fi # insert the otp at the focussed text box and submit it echo \"$otp\" have fun,\nCredits Kudos to Sasha for most of detailed instructions\n","wordCount":"803","inLanguage":"en","datePublished":"2022-06-14T00:00:00Z","dateModified":"2022-06-14T00:00:00Z","author":{"@type":"Person","name":"Andrea Manzini"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ilmanzo.github.io/post/otp-generation-from-command-line/"},"publisher":{"@type":"Organization","name":"ilManzo's blog","logo":{"@type":"ImageObject","url":"https://ilmanzo.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ilmanzo.github.io/ accesskey=h title="ilManzo's blog (Alt + H)">ilManzo's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ilmanzo.github.io/curriculum title=Curriculum><span>Curriculum</span></a></li><li><a href=https://ilmanzo.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://ilmanzo.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://ilmanzo.github.io/post/ title=Posts><span>Posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>automate OTP credentials for multi-factor authentication</h1><div class=post-description>automate generation of OTP for multi-factor authentication</div><div class=post-meta><span title='2022-06-14 00:00:00 +0000 UTC'>June 14, 2022</span>&nbsp;·&nbsp;Andrea Manzini</div></header><div class=post-content><h2 id=background>Background:<a hidden class=anchor aria-hidden=true href=#background>#</a></h2><p>I work with one or more terminal command-line always opened and having to pick up my phone to generate an OTP breaks my flow; also it&rsquo;s always nice to have an alternate source of multi-factor authentication if something bad happens, one day you could lose or break your trusty mobile device.</p><p>Therefore I was looking for a way to login through <a href=https://www.okta.com/>Okta</a> portals <em>without</em> a phone.
You may argument that this defeats the whole meaning of MFA, but let&rsquo;s say <em>it&rsquo;s only an hack for research and fun purpose</em> &mldr;</p><h2 id=disclaimer>DISCLAIMER:<a hidden class=anchor aria-hidden=true href=#disclaimer>#</a></h2><p>This setup should be used only on ANOTHER trusted device, so use it at your own risk, and be sure to always properly protect your credentials: security is a very serious topic.</p><h2 id=tldr>TLDR:<a hidden class=anchor aria-hidden=true href=#tldr>#</a></h2><p>With this setup, every time you write <code>:okta</code> in any text entry field, it will be replaced with a properly generated OTP!</p><p><img loading=lazy src=/img/okta_otp.gif alt=okta_otp></p><h2 id=requirements>Requirements:<a hidden class=anchor aria-hidden=true href=#requirements>#</a></h2><p>Install <a href=https://github.com/tadfisher/pass-otp#installation>pass-otp</a>.</p><p>for openSUSE Tumbleweed users like me, it&rsquo;s just a matter of</p><pre><code># zypper install pass-otp
</code></pre><h2 id=steps>Steps:<a hidden class=anchor aria-hidden=true href=#steps>#</a></h2><p>If you already have multifactor authentication set up, start with step 1.</p><p>Otherwise, login up to the point where it asks you to &ldquo;Set up
(two-|multi)factor authentication&rdquo;, and go to step 4.</p><ol><li>Login to your organisation&rsquo;s Okta settings. The url is typically of the
form <code>https://OKTA_HOME_PAGE/enduser/settings</code>.</li></ol><p>For example,</p><ul><li>The University of Sydney: <a href=https://sso.sydney.edu.au/enduser/settings>https://sso.sydney.edu.au/enduser/settings</a></li><li>Garvan: <a href=https://garvan.okta.com/enduser/settings>https://garvan.okta.com/enduser/settings</a></li><li>Linkedin: <a href=https://linkedin.okta.com/enduser/settings>https://linkedin.okta.com/enduser/settings</a></li><li>Docusign: <a href=https://docusign.okta.com/enduser/settings>https://docusign.okta.com/enduser/settings</a></li><li>Groupon: <a href=https://groupon.okta.com//enduser/settings>https://groupon.okta.com//enduser/settings</a></li></ul><ol start=2><li><p>Scroll to &ldquo;Extra Verification&rdquo;. This is typically at the bottom on the
right.</p></li><li><p>If you already have Okta Verify or Google Authenticator set up with your
organisation, remove it.</p></li><li><p>Now you need to retrieve the secret one-time password (OTP) key.</p><ol><li><p>Click &ldquo;Set up&rdquo; next to &ldquo;Okta Verify&rdquo;.</p></li><li><p>If a button appears, click it. It may say &ldquo;Configure factor&rdquo; or &ldquo;Set
up&rdquo;.</p></li><li><p>Click &ldquo;iPhone&rdquo; or &ldquo;Android&rdquo;. It doesn&rsquo;t matter which one you pick, you
won&rsquo;t be needing a phone.</p></li><li><p>Click &ldquo;Next&rdquo;.</p></li><li><p>Click &ldquo;Can&rsquo;t scan?&rdquo;.</p></li><li><p>Click the first dropdown menu and select &ldquo;Setup manually without push
notification&rdquo;.</p></li><li><p>Copy the secret key to your clipboard.</p></li></ol></li><li><p>Create the OTP generator by running the following command, replacing
<code>OTP_NAME</code> with a name of your choosing. Paste the secret key when prompted.</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ pass otp insert -esi byebyeokta OTP_NAME
</span></span></code></pre></div><ol start=6><li>Generate the OTP by running the following command.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ pass otp OTP_NAME
</span></span></code></pre></div><p>Copy the output. Alternatively, use the <code>-c</code> option to copy it directly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ pass otp -c OTP_NAME
</span></span></code></pre></div><ol start=7><li><p>Enter the OTP.</p><ol><li><p>Click &ldquo;Next&rdquo;.</p></li><li><p>Paste the number in the &ldquo;Enter Code&rdquo; text box.</p></li><li><p>Click &ldquo;Verify&rdquo; to finish the setup.</p></li><li><p>You may have to click &ldquo;Finish&rdquo; as well.</p></li></ol></li><li><p>Now, whenever you are required to enter the OTP code in the future, simply
generate it by following step 6.</p></li></ol><h2 id=authenticator-app>Authenticator App<a hidden class=anchor aria-hidden=true href=#authenticator-app>#</a></h2><p>Add the secret key to a OTP authenticator app. This is useful if you need to
use a different computer and don&rsquo;t have access to one which you set up
<code>pass-otp</code> with.</p><ol><li><p>Find a way to add a new account by entering the secret key manually into the
app. For the Okta Verify app, do the following. The steps are similar for
the Google Authenticator app.</p><ol><li><p>Press the &ldquo;+&rdquo; button in the top-right corner.</p></li><li><p>Press &ldquo;Other&rdquo;.</p></li><li><p>Press &ldquo;Enter Key Manually&rdquo;.</p></li><li><p>Type an Account Name of your choosing.</p></li><li><p>Type in the secret key. If you have lost the key, run the following
command to retrieve it.</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ pass OTP_NAME | awk -F <span style=color:#e6db74>&#39;[=&amp;]&#39;</span> <span style=color:#e6db74>&#39;{print $2}&#39;</span>
</span></span></code></pre></div><ol start=6><li>Press &ldquo;Done&rdquo;.</li></ol></li><li><p>Confirm you get the same codes on your phone as when following step 6. If
not, you may have misspelled the secret key, in which case try again.</p></li><li><p>If you have an old account on a OTP authenticator app which you removed in
step 3 you can remove it from the app.</p></li></ol><h2 id=automating>Automating<a hidden class=anchor aria-hidden=true href=#automating>#</a></h2><p>The goal is to auto fill and submit once prompted to enter the OTP code.</p><p>The <a href=https://github.com/sashajenner>original author</a> used <a href=https://github.com/qutebrowser/qutebrowser>qutebrowser</a>, binding a key chain to a <code>submit_otp_qute.sh</code>
userscript; so you can follow that</p><p>For other purposes, and many reasons, personally I&rsquo;m already using a tool like <a href=https://espanso.org/>Espanso</a>, but also <a href=https://github.com/autokey/autokey>AutoKey</a> and any other &ldquo;text-expander&rdquo; that is able run external commands can meet the requirements.</p><p>You can use an Espanso configuration snippet like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>trigger</span>: <span style=color:#e6db74>&#34;:okta&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>replace</span>: <span style=color:#e6db74>&#34;{{output}}&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>vars</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>output</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>shell</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>params</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>cmd</span>: <span style=color:#ae81ff>/usr/local/bin/submit_otp.sh OTP_NAME</span></span></span></code></pre></div><p>be sure to replace <code>OTP_NAME</code> with the one you chose before.</p><p>The script executed is quite easy, simply retrieve the code and echoes to stdout:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e># user script that enters the otp code </span>
</span></span><span style=display:flex><span><span style=color:#75715e># designed to be used when prompted with the Okta Verify &#34;Enter Code&#34; form</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$#<span style=color:#e6db74>&#34;</span> -ne <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	echo <span style=color:#e6db74>&#34;usage: </span>$0<span style=color:#e6db74> OTP_NAME&#34;</span>
</span></span><span style=display:flex><span>	exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>OTP_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># retrieve the otp</span>
</span></span><span style=display:flex><span>otp<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>pass otp <span style=color:#e6db74>&#34;</span>$OTP_NAME<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$otp<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	echo <span style=color:#e6db74>&#34;Unknown OTP_NAME &#39;</span>$OTP_NAME<span style=color:#e6db74>&#39;&#34;</span>
</span></span><span style=display:flex><span>	exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># insert the otp at the focussed text box and submit it</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$otp<span style=color:#e6db74>&#34;</span></span></span></code></pre></div><p><img loading=lazy src=/img/okta_otp.gif alt=okta_otp></p><p>have fun,</p><h2 id=credits>Credits<a hidden class=anchor aria-hidden=true href=#credits>#</a></h2><p>Kudos to <a href=https://github.com/sashajenner>Sasha</a> for most of detailed instructions</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ilmanzo.github.io/tags/bash/>bash</a></li><li><a href=https://ilmanzo.github.io/tags/linux/>linux</a></li><li><a href=https://ilmanzo.github.io/tags/hacking/>hacking</a></li><li><a href=https://ilmanzo.github.io/tags/otp/>otp</a></li></ul></footer></article></main><footer class=footer><span>© 2012-2023 Andrea Manzini</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>