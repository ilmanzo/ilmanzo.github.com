<!doctype html><html lang=en><head><title>a SUSE hackweek22 report &ndash; ilManzo's blog</title><meta name=description content="A minimalist, pragmatic website and personal blog"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin=anonymous><link rel=stylesheet href=https://ilmanzo.github.io/css/palettes/base16-dark.css><link rel=stylesheet href=https://ilmanzo.github.io/css/risotto.css><link rel=stylesheet href=https://ilmanzo.github.io/css/custom.css></head><body><div class=page><header class=page__header><h1 class=page__logo><a href=https://ilmanzo.github.io/ class=page__logo-inner>ilManzo's blog</a></h1><nav class="page__nav main-nav"><ul><li class=main-nav__item><a class=nav-main-item href=https://ilmanzo.github.io/curriculum title>Curriculum</a></li><li class=main-nav__item><a class=nav-main-item href=https://ilmanzo.github.io/categories title>Categories</a></li><li class=main-nav__item><a class=nav-main-item href=https://ilmanzo.github.io/tags title>Tags</a></li><li class=main-nav__item><a class="nav-main-item active" href=https://ilmanzo.github.io/post/ title=Posts>Posts</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>a SUSE hackweek22 report</h1></header><div class=content__body><p>On this February I decided to participate with a project to the <a href=https://hackweek.opensuse.org/22/projects/containerfile-slash-dockerfile-generator-library>SUSE Hackweek</a>.</p><p>Hack Week is the time SUSE employees experiment, innovate & learn interruption-free for a whole week! Across teams or alone, but always without limits.
A SUSE tradition since 2007, Hack Week has brought together hundreds of hackers around the globe to collaborate on open source. Learn more about Hack Week <a href=https://hackweek.opensuse.org/about>here</a></p><p>My project has four main purposes:</p><ul><li>play with the <a href=https://nim-lang.org/>Nim programming language</a> advanced features like templates and macros</li><li>experiment with container generation</li><li>practice Test Driven Development/Design</li><li>Have fun</li></ul><p>So I decided to write a simple library that lets you describe a container image with a DSL (Domain Specific Language) that reflects the standard, declarative style standard for Dockerfile and Containerfile. The benefits of this approach are multiple: you have the compiler checking for any errors and you can use a proper programming language to add any logic you need.</p><p>Usage is straightforward: you can basically mix Containerfile syntax with powerful Nim language contructs: variables, loops, arrays and <a href=https://nim-lang.org/docs/manual.html>anything else</a>. Nim compiles to small native binary but can also generate javascript, see <a href=https://pietroppeter.github.io/p5nim/okazz_220919a.html>these</a> beautiful <a href=https://pietroppeter.github.io/p5nim/okazz_221026a.html>generative art</a> examples.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nim data-lang=nim><span style=display:flex><span><span style=color:#f92672>import</span> containertools
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> my_app<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;program.py&#34;</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> image <span style=color:#f92672>=</span> container:
</span></span><span style=display:flex><span>    <span style=color:#f92672>FROM</span> <span style=color:#e6db74>&#34;opensuse/leap&#34;</span>
</span></span><span style=display:flex><span>    WORKDIR <span style=color:#e6db74>&#34;/opt&#34;</span>
</span></span><span style=display:flex><span>    COPY my_app my_app
</span></span><span style=display:flex><span>    CMD <span style=color:#f92672>@[</span><span style=color:#e6db74>&#34;python3&#34;</span>, my_app<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>image.save <span style=color:#e6db74>&#34;Containerfile&#34;</span>
</span></span><span style=display:flex><span>image.build  </span></span></code></pre></div><p>I implemented everything using TDD (Test Driven Development/Design) and this approach made me rethink a lot of design decisions and refactoring, which maybe are evident in the <a href=https://github.com/ilmanzo/containertools>source code repository</a> history, but I loved how the incremental process of adding tests drives you towards a clean design.</p><p>The library also can work in the opposite way: you can feed it with a Dockerfile and it will check for errors or suggest some possible optimizations, but this feature is only at the early stage. Further ideas can be to check the container for secret leaks or check at runtime for issues like wrong image names or dangerous commands.
We could also generate different kind of declarative files formats, as yaml for kubernetes, CI/CD workflows, and so on.</p><p>If you are curious about the inner working or want to take part in the development, feel free to get in contact.</p><p>I enjoyed HackWeek and this first Proof-of-concept implementation, looking forward to future improvements!</p></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><img class=about__logo src=https://ilmanzo.github.io/images/rice.svg alt=Logo><h1 class=about__title>Andrea Manzini</h1><p class=about__description>A minimalist, pragmatic website and personal blog</p></div><ul class=aside__social-links><li><a href=https://github.com/ilmanzo rel=me aria-label=GitHub title=GitHub><i class="fab fa-github" aria-hidden=true></i></a>&nbsp;</li><li><a href=mailto:ilmanzo@gmail.com rel=me aria-label=Email title=Email><i class="fas fa-envelope" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://www.linkedin.com/in/andreamanzini rel=me aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://twitter.com/ilmanzo rel=me aria-label=Twitter title=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://ilmanzo.github.io/index.xml rel=me aria-label="RSS Feed" title="RSS Feed"><i class="fas fa-rss-square" aria-hidden=true></i></a>&nbsp;</li></ul></div><hr><div class=aside__content><p>writeup about learnings and achievements in last hackweek</p><p>By Andrea Manzini,
2023-02-03</p></div></section><footer class=page__footer><p></p><br><br><p class=copyright>Â© 2022 Andrea Manzini</p><p class=advertisement>Powered by <a href=https://gohugo.io/>hugo</a> and <a href=https://github.com/joeroe/risotto>risotto</a>.</p></footer></div></body></html>