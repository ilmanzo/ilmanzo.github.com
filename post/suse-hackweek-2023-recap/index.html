<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>a SUSE hackweek22 report | ilManzo's blog</title>
<meta name=keywords content="linux,programming,testing,nim,container"><meta name=description content="writeup about learnings and achievements in last SUSE hackweek"><meta name=author content="Andrea Manzini"><link rel=canonical href=https://ilmanzo.github.io/post/suse-hackweek-2023-recap/><link crossorigin=anonymous href=/assets/css/stylesheet.e087fd1dc76e73a35ae6d7028ddc1ba41e0131e7f9b3a6e2d019a208e6d6c4b5.css integrity="sha256-4If9Hcduc6Na5tcCjdwbpB4BMef5s6bi0BmiCObWxLU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://ilmanzo.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ilmanzo.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ilmanzo.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ilmanzo.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ilmanzo.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6PN4FTRLNL"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6PN4FTRLNL",{anonymize_ip:!1})}</script><meta property="og:title" content="a SUSE hackweek22 report"><meta property="og:description" content="writeup about learnings and achievements in last SUSE hackweek"><meta property="og:type" content="article"><meta property="og:url" content="https://ilmanzo.github.io/post/suse-hackweek-2023-recap/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-02-03T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-03T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="a SUSE hackweek22 report"><meta name=twitter:description content="writeup about learnings and achievements in last SUSE hackweek"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ilmanzo.github.io/post/"},{"@type":"ListItem","position":2,"name":"a SUSE hackweek22 report","item":"https://ilmanzo.github.io/post/suse-hackweek-2023-recap/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"a SUSE hackweek22 report","name":"a SUSE hackweek22 report","description":"writeup about learnings and achievements in last SUSE hackweek","keywords":["linux","programming","testing","nim","container"],"articleBody":"On this February I decided to participate with a project to the SUSE Hackweek.\nHack Week is the time SUSE employees experiment, innovate \u0026 learn interruption-free for a whole week! Across teams or alone, but always without limits. A SUSE tradition since 2007, Hack Week has brought together hundreds of hackers around the globe to collaborate on open source. Learn more about Hack Week here\nMy project has four main purposes:\nplay with the Nim programming language advanced features like templates and macros experiment with container generation practice Test Driven Development/Design Have fun So I decided to write a simple library that lets you describe a container image with a DSL (Domain Specific Language) that reflects the standard, declarative style standard for Dockerfile and Containerfile. The benefits of this approach are multiple: you have the compiler checking for any errors and you can use a proper programming language to add any logic you need.\nNim is a statically typed compiled systems programming language. It compiles to small native binary but can also generate javascript, see these beautiful generative art examples.\nThe library usage is straightforward: you can basically mix Containerfile syntax with powerful Nim language contructs: variables, loops, arrays and anything else.\nimport containertools let my_app=\"program.py\" let image = container: FROM \"opensuse/leap\" WORKDIR \"/opt\" COPY my_app my_app CMD @[\"python3\", my_app] image.save \"Containerfile\" image.build I implemented everything using TDD (Test Driven Development/Design) and this approach made me rethink a lot of design decisions and refactoring, which maybe are evident in the source code repository history, but I loved how the incremental process of adding tests drives you towards a clean design.\nThe library also can work in the opposite way: you can feed it with a Dockerfile and it will check for errors or suggest some possible optimizations, but this feature is only at the early stage. Further ideas can be to check the container for secret leaks or check at runtime for issues like wrong image names or dangerous commands. We could also generate different kind of declarative files formats, as yaml for kubernetes, CI/CD workflows, and so on.\nIf you are curious about the inner working or want to take part in the development, feel free to get in contact.\nI enjoyed HackWeek and this first Proof-of-concept implementation, looking forward to future improvements!\n","wordCount":"384","inLanguage":"en","datePublished":"2023-02-03T00:00:00Z","dateModified":"2023-02-03T00:00:00Z","author":{"@type":"Person","name":"Andrea Manzini"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ilmanzo.github.io/post/suse-hackweek-2023-recap/"},"publisher":{"@type":"Organization","name":"ilManzo's blog","logo":{"@type":"ImageObject","url":"https://ilmanzo.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ilmanzo.github.io/ accesskey=h title="ilManzo's blog (Alt + H)">ilManzo's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ilmanzo.github.io/curriculum title=Curriculum><span>Curriculum</span></a></li><li><a href=https://ilmanzo.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://ilmanzo.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://ilmanzo.github.io/post/ title=Posts><span>Posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">a SUSE hackweek22 report</h1><div class=post-description>writeup about learnings and achievements in last SUSE hackweek</div><div class=post-meta><span title='2023-02-03 00:00:00 +0000 UTC'>February 3, 2023</span>&nbsp;·&nbsp;Andrea Manzini</div></header><div class=post-content><p>On this February I decided to participate with a project to the <a href=https://hackweek.opensuse.org/22/projects/containerfile-slash-dockerfile-generator-library>SUSE Hackweek</a>.</p><p>Hack Week is the time SUSE employees experiment, innovate & learn interruption-free for a whole week! Across teams or alone, but always without limits.
A SUSE tradition since 2007, Hack Week has brought together hundreds of hackers around the globe to collaborate on open source. Learn more about Hack Week <a href=https://hackweek.opensuse.org/about>here</a></p><p>My project has four main purposes:</p><ul><li>play with the <a href=https://nim-lang.org/>Nim programming language</a> advanced features like templates and macros</li><li>experiment with container generation</li><li>practice Test Driven Development/Design</li><li>Have fun</li></ul><p>So I decided to write a simple library that lets you describe a container image with a DSL (Domain Specific Language) that reflects the standard, declarative style standard for Dockerfile and Containerfile. The benefits of this approach are multiple: you have the compiler checking for any errors and you can use a proper programming language to add any logic you need.</p><p>Nim is a statically typed compiled systems programming language. It compiles to small native binary but can also generate javascript, see <a href=https://pietroppeter.github.io/p5nim/okazz_220919a.html>these</a> beautiful <a href=https://pietroppeter.github.io/p5nim/okazz_221026a.html>generative art</a> examples.</p><p>The library usage is straightforward: you can basically mix Containerfile syntax with powerful Nim language contructs: variables, loops, arrays and <a href=https://nim-lang.org/docs/manual.html>anything else</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nim data-lang=nim><span style=display:flex><span><span style=color:#f92672>import</span> containertools
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> my_app<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;program.py&#34;</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> image <span style=color:#f92672>=</span> container:
</span></span><span style=display:flex><span>    <span style=color:#f92672>FROM</span> <span style=color:#e6db74>&#34;opensuse/leap&#34;</span>
</span></span><span style=display:flex><span>    WORKDIR <span style=color:#e6db74>&#34;/opt&#34;</span>
</span></span><span style=display:flex><span>    COPY my_app my_app
</span></span><span style=display:flex><span>    CMD <span style=color:#f92672>@[</span><span style=color:#e6db74>&#34;python3&#34;</span>, my_app<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>image.save <span style=color:#e6db74>&#34;Containerfile&#34;</span>
</span></span><span style=display:flex><span>image.build  </span></span></code></pre></div><p>I implemented everything using TDD (Test Driven Development/Design) and this approach made me rethink a lot of design decisions and refactoring, which maybe are evident in the <a href=https://github.com/ilmanzo/containertools>source code repository</a> history, but I loved how the incremental process of adding tests drives you towards a clean design.</p><p>The library also can work in the opposite way: you can feed it with a Dockerfile and it will check for errors or suggest some possible optimizations, but this feature is only at the early stage. Further ideas can be to check the container for secret leaks or check at runtime for issues like wrong image names or dangerous commands.
We could also generate different kind of declarative files formats, as yaml for kubernetes, CI/CD workflows, and so on.</p><p>If you are curious about the inner working or want to take part in the development, feel free to get in contact.</p><p>I enjoyed HackWeek and this first Proof-of-concept implementation, looking forward to future improvements!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ilmanzo.github.io/tags/linux/>linux</a></li><li><a href=https://ilmanzo.github.io/tags/programming/>programming</a></li><li><a href=https://ilmanzo.github.io/tags/testing/>testing</a></li><li><a href=https://ilmanzo.github.io/tags/nim/>nim</a></li><li><a href=https://ilmanzo.github.io/tags/container/>container</a></li></ul></footer></article></main><footer class=footer><span>© 2012-2023 Andrea Manzini</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>