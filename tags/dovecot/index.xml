<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>dovecot on ilManzo's blog</title><link>https://ilmanzo.github.io/tags/dovecot/</link><description>Recent content in dovecot on ilManzo's blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Â© 2022 Andrea Manzini</copyright><lastBuildDate>Wed, 05 Mar 2014 00:00:00 +0000</lastBuildDate><atom:link href="https://ilmanzo.github.io/tags/dovecot/index.xml" rel="self" type="application/rss+xml"/><item><title>dovecot: cleaning old Spam and Trash messages after some days</title><link>https://ilmanzo.github.io/post/postfix-dovecot-cleanup-virtual-folders/</link><pubDate>Wed, 05 Mar 2014 00:00:00 +0000</pubDate><guid>https://ilmanzo.github.io/post/postfix-dovecot-cleanup-virtual-folders/</guid><description>This script is useful to delete old messages in &amp;ldquo;Junk&amp;rdquo; mail folders (Spam, Trash) automatically after some days.
adapted from these notes to work on debian/postfixadmin/dovecot
#!/bin/bash # # itera sulle mailbox cancellando messaggi vecchi # per default, nel cestino 30gg e Spam 15 gg # # MySQL details HOST=&amp;#34;127.0.0.1&amp;#34;; USER=&amp;#34;put_here_your_mysql_user&amp;#34;; PWD=&amp;#34;put_here_your_mysql_password&amp;#34;; MYSQL=&amp;#34;/usr/bin/mysql&amp;#34;; # dovecot details DOVEADM=&amp;#34;/usr/bin/doveadm&amp;#34;; TEMPFILE=$(/bin/mktemp) # Output sql to a file that we want to run echo &amp;#34;use postfixadmin; select username from mailbox&amp;#34; &amp;gt; $TEMPFILE # Run the query and get the results (adjust the path to mysql) results=$($MYSQL -h $HOST -u $USER -p$PWD -N &amp;lt; $TEMPFILE); # Loop through each row for row in $results do echo &amp;#34;Purging $row Trash and Junk mailbox.</description></item></channel></rss>